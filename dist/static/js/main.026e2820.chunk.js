(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{36:function(e,t,a){e.exports=a(53)},41:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),l=a.n(c),s=(a(41),a(2)),i=a(6),m=a(3),u=a(4),o=a.n(u),p=a(9),d=a(14);a(54),a(43),a(47);d.initializeApp({apiKey:"AIzaSyC9nn1ezQ1EGSjkMnYHURS50ZKiN3DDeUM",authDomain:"dynamo-gram.firebaseapp.com",databaseURL:"https://dynamo-gram.firebaseio.com",projectId:"dynamo-gram",storageBucket:"dynamo-gram.appspot.com",messagingSenderId:"358836993331",appId:"1:358836993331:web:d1eb9ff8053209afa15246"});var f=d.firestore(),E=d.storage(),v=d.auth(),g=d.firestore.FieldValue.serverTimestamp,b=function(e,t){return v.signInWithEmailAndPassword(e,t)},N=function(){var e=Object(p.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.createUserWithEmailAndPassword(t,a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),h=function(e,t){return v.currentUser||alert("Not Authorized"),f.doc("users/".concat(v.currentUser.uid)).set({firstName:e,lastName:t,intials:e[0]+t[0]})},j=function(){return v.currentUser&&v.currentUser.uid},O=function(){var e=Object(p.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=v.currentUser,!e.t0){e.next=5;break}return e.next=4,f.doc("users/".concat(v.currentUser.uid)).get();case 4:e.t0=e.sent;case 5:return t=e.t0,e.abrupt("return",v.currentUser&&t.get("intials"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=v.currentUser,!e.t0){e.next=5;break}return e.next=4,f.doc("users/".concat(v.currentUser.uid)).get();case 4:e.t0=e.sent;case 5:return t=e.t0,e.abrupt("return",v.currentUser&&t.get("firstName"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(m.g)((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){O().then((function(e){l(e)}))}));var m=function(){var t=Object(p.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.signOut();case 2:e.history.push("/login");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=j()?r.a.createElement("ul",{id:"nav-mobile",className:"right"},r.a.createElement("li",null,r.a.createElement(i.c,{to:"/",className:"btn btn-floating pink lighten-1"},c||null)),r.a.createElement("li",null,r.a.createElement("a",{onClick:m},"Sign Out"))):r.a.createElement("ul",{id:"nav-mobile",className:"right"},r.a.createElement("li",null,r.a.createElement(i.c,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(i.c,{to:"/register"},"SignUp")));return r.a.createElement("div",{className:"title"},r.a.createElement("nav",{className:"nav-wrapper"},r.a.createElement(i.c,{to:"/",className:"brand-logo left"},"DynamoGram"),u))})),S=a(18);var x=function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(null),i=Object(s.a)(l,2),m=i[0],u=i[1],d=Object(n.useState)(null),v=Object(s.a)(d,2),b=v[0],N=v[1];return Object(n.useEffect)((function(){var t=E.ref(e.name),a=f.collection("images"),n=j();y();t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;c(t)}),(function(e){u(e)}),Object(p.a)(o.a.mark((function e(){var r,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:r=e.sent,c=g(),l=n,a.add({url:r,createdAt:c,uid:l}),N(r);case 7:case"end":return e.stop()}}),e)}))))}),[e]),{progress:r,url:b,error:m}},k=a(11);var U=function(e){var t=e.file,a=e.setFile,c=x(t),l=c.progress,s=c.url;return Object(n.useEffect)((function(){s&&a(null)}),[s,a]),console.log(l,s),r.a.createElement(k.a.div,{className:"progress-bar",initial:{width:0},animate:{width:l+"%"}})};var F=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),i=Object(s.a)(l,2),m=i[0],u=i[1],o=["image/png","image/jpeg","image/jpg"];return r.a.createElement(n.Fragment,null,r.a.createElement("form",null,r.a.createElement("label",{className:"image-label"},r.a.createElement("input",Object(S.a)({type:"file",className:"img-input",onChange:function(e){var t=e.target.files[0];t&&o.includes(t.type)?(c(t),u("")):(c(null),u("Invalid file! Select only png or jpg or jpeg images"))}},"className","image-input")),r.a.createElement("span",null,"+")),r.a.createElement("div",{className:"ouput"},m&&r.a.createElement("div",{className:"error"},m),a&&r.a.createElement("div",null,a.name),a&&r.a.createElement(U,{file:a,setFile:c}))))},C=a(24),I=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){var t=f.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){j()===e.data().uid&&t.push(Object(C.a)(Object(C.a)({},e.data()),{},{id:e.id}))})),c(t)}));return function(){return t()}}),[e]),{docs:r}},A=a(21),D=a.n(A),L=(a(28),function(e){var t=e.setSelectedImg,a=I("images").docs;return r.a.createElement("div",{className:"img-grid"},a&&a.map((function(e){return r.a.createElement(k.a.div,{className:"img-wrap",key:e.id,layout:!0,whileHover:{opacity:1},onClick:function(){return t(e.url)}},r.a.createElement(k.a.img,{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}}))})))}),z=function(e){var t=e.setSelectedImg,a=e.selectedImg;return r.a.createElement(k.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(k.a.img,{src:a,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}}))},P=a(31),R=a(32),B=a(35),T=a(33);n.Component;var W=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1];return console.log(a),r.a.createElement(n.Fragment,null,r.a.createElement(w,null),r.a.createElement("div",{className:"title"},r.a.createElement("h2",null,"Your Pictures"),r.a.createElement("p",null,"Welcome to DynamoGram, create you own photo album.")),r.a.createElement(F,null),r.a.createElement(L,{setSelectedImg:c}),a&&r.a.createElement(z,{selectedImg:a,setSelectedImg:c}))};var G=Object(m.g)((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),d=u[0],f=u[1],E=Object(n.useState)(null),v=Object(s.a)(E,2),g=v[0],N=v[1],h=function(e){var t=e.currentTarget,a=t.name,n=t.value;"email"===a?l(n):"password"===a&&f(n)},j=function(){var t=Object(p.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,b(c,d);case 4:e.history.replace("/"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),N(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement(w,null),r.a.createElement("div",{className:"container"},r.a.createElement("h4",{className:"center mr-4"},"Welcome Back"),r.a.createElement("form",{className:"white",onSubmit:j},r.a.createElement("div",{className:"input-field "},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",value:c,onChange:h})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",value:d,onChange:h})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{type:"submit",className:"btn pink lighten-1 z-depth-0"},"Login"),r.a.createElement("div",{className:"red-text center"},g?r.a.createElement("p",null,g," "):null)),r.a.createElement("p",{className:"text-muted text-small"},"Don't  have an account? ",r.a.createElement(i.b,{to:"/register"},"Register")))))}));var M=Object(m.g)((function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),d=u[0],f=u[1],E=Object(n.useState)(""),v=Object(s.a)(E,2),g=v[0],b=v[1],j=Object(n.useState)(""),O=Object(s.a)(j,2),y=O[0],S=O[1],x=Object(n.useState)(null),k=Object(s.a)(x,2),U=k[0],F=k[1],C=function(e){var t=e.currentTarget,a=t.name,n=t.value;"email"===a?l(n):"password"===a?f(n):"firstName"===a?b(n):"lastName"===a&&S(n)},I=function(){var t=Object(p.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,N(c,d);case 4:return t.next=6,h(g,y);case 6:e.history.replace("/"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),F(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement(w,null),r.a.createElement("div",{className:"container"},r.a.createElement("h4",{className:"center mr-4"},"Register"),r.a.createElement("form",{className:"white",onSubmit:I},r.a.createElement("div",{className:"input-field "},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",name:"firstName",className:"form-control",value:g,onChange:C})),r.a.createElement("div",{className:"input-field "},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",name:"lastName",className:"form-control",value:y,onChange:C})),r.a.createElement("div",{className:"input-field "},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",name:"email",className:"form-control",value:c,onChange:C})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",value:d,onChange:C})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{type:"submit",className:"btn pink lighten-1 z-depth-0"},"Register"),r.a.createElement("div",{className:"red-text center"},U?r.a.createElement("p",null,U," "):null)),r.a.createElement("p",{className:"text-muted text-small"},"Already have an account? ",r.a.createElement(i.b,{to:"/login"},"Login")))))})),H=a(34),J=function(e){var t=e.component,a=Object(H.a)(e,["component"]);return r.a.createElement(m.b,Object.assign({},a,{render:function(e){return j()?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/login"})}}))};var K=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){new Promise((function(e){v.onAuthStateChanged(e)})).then((function(e){c(e)}))})),!1!==a?r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(m.d,null,r.a.createElement(J,{exact:!0,path:"/",component:W}),r.a.createElement(m.b,{exact:!0,path:"/login",component:G}),r.a.createElement(m.b,{exact:!0,path:"/register",component:M})))):r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"preloader-wrapper big active center"},r.a.createElement("div",{className:"spinner-layer spinner-blue"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))),r.a.createElement("div",{className:"spinner-layer spinner-red"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))),r.a.createElement("div",{className:"spinner-layer spinner-yellow"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))),r.a.createElement("div",{className:"spinner-layer spinner-green"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.026e2820.chunk.js.map